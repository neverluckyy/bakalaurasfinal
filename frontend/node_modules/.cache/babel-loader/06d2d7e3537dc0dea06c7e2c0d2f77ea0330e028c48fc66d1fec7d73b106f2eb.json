{"ast":null,"code":"import _objectSpread from\"C:/Users/yoga/Downloads/bakalauras-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{ArrowLeft,CheckCircle,XCircle,Trophy,Star,Info}from'lucide-react';import axios from'axios';import'./SectionQuiz.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SectionQuiz=()=>{const{sectionId}=useParams();const{user,updateUser}=useAuth();const navigate=useNavigate();const[questions,setQuestions]=useState([]);const[currentQuestion,setCurrentQuestion]=useState(0);const[selectedAnswer,setSelectedAnswer]=useState(null);const[answers,setAnswers]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[quizCompleted,setQuizCompleted]=useState(false);const[score,setScore]=useState(0);const[xpEarned,setXpEarned]=useState(0);const[showExplanation,setShowExplanation]=useState(false);const[answerSubmitted,setAnswerSubmitted]=useState(false);const[moduleId,setModuleId]=useState(null);useEffect(()=>{const fetchQuestions=async()=>{try{const[questionsResponse,sectionResponse]=await Promise.all([axios.get(\"/api/sections/\".concat(sectionId,\"/questions\")),axios.get(\"/api/sections/\".concat(sectionId))]);setQuestions(questionsResponse.data);setModuleId(sectionResponse.data.module_id);}catch(err){setError('Failed to load quiz questions');console.error('Error fetching questions:',err);}finally{setLoading(false);}};fetchQuestions();},[sectionId]);const handleAnswerSelect=answer=>{if(!answerSubmitted){setSelectedAnswer(answer);}};const handleSubmitAnswer=()=>{if(selectedAnswer===null)return;const newAnswers=_objectSpread(_objectSpread({},answers),{},{[currentQuestion]:selectedAnswer});setAnswers(newAnswers);// Check if answer is correct\nconst currentQ=questions[currentQuestion];const isAnswerCorrect=selectedAnswer===currentQ.correct_answer;if(isAnswerCorrect){setScore(score+1);}setAnswerSubmitted(true);setShowExplanation(true);};const handleNext=async()=>{if(currentQuestion<questions.length-1){setCurrentQuestion(currentQuestion+1);setSelectedAnswer(null);setShowExplanation(false);setAnswerSubmitted(false);}else{// Quiz completed\nconst finalScore=score;// Score is already updated in handleSubmitAnswer\nconst percentage=finalScore/questions.length*100;const earnedXP=Math.round(percentage/100*50);// Max 50 XP per quiz\nsetXpEarned(earnedXP);setQuizCompleted(true);// Submit quiz results\ntry{const response=await axios.post(\"/api/sections/\".concat(sectionId,\"/quiz\"),{answers:answers,score:finalScore,totalQuestions:questions.length});// Update user XP\nif(response.data.xpEarned){// Fetch updated user stats to ensure we have the latest data\ntry{const userStatsResponse=await axios.get('/api/user/stats');const updatedUser=_objectSpread(_objectSpread({},user),{},{total_xp:response.data.newTotalXP||(user.total_xp||0)+response.data.xpEarned,level:response.data.newLevel||user.level});updateUser(updatedUser);}catch(statsErr){console.error('Error fetching updated user stats:',statsErr);// Fallback to just updating XP\nupdateUser(_objectSpread(_objectSpread({},user),{},{total_xp:(user.total_xp||0)+response.data.xpEarned}));}}}catch(err){console.error('Error submitting quiz results:',err);}}};const handleRetry=()=>{setCurrentQuestion(0);setSelectedAnswer(null);setAnswers({});setQuizCompleted(false);setScore(0);setXpEarned(0);setShowExplanation(false);setAnswerSubmitted(false);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"section-quiz-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading quiz...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"section-quiz-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})});}if(!Array.isArray(questions)||questions.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"section-quiz-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"No questions available for this section\"})});}if(quizCompleted){const percentage=score/questions.length*100;const isPassed=percentage>=70;return/*#__PURE__*/_jsx(\"div\",{className:\"section-quiz-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-results\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"results-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Quiz Complete!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"score-badge \".concat(isPassed?'passed':'failed'),children:[isPassed?/*#__PURE__*/_jsx(CheckCircle,{size:24}):/*#__PURE__*/_jsx(XCircle,{size:24}),percentage,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:score}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Correct Answers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:questions.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Questions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:xpEarned}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"XP Earned\"})]})]}),isPassed&&/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(Trophy,{size:32}),/*#__PURE__*/_jsx(\"h2\",{children:\"Congratulations!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You've successfully completed this section and earned \",xpEarned,\" XP!\"]})]}),!isPassed&&/*#__PURE__*/_jsxs(\"div\",{className:\"failure-message\",children:[/*#__PURE__*/_jsx(XCircle,{size:32}),/*#__PURE__*/_jsx(\"h2\",{children:\"Keep Learning!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You need 70% to pass. Review the material and try again.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"btn btn-secondary\",children:\"Retry Quiz\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/modules/\".concat(moduleId||1),{state:{refresh:true}}),className:\"btn btn-primary\",children:\"Back to Module\"})]})]})});}const currentQ=questions[currentQuestion];const progress=(currentQuestion+1)/questions.length*100;const isAnswerCorrect=selectedAnswer===currentQ.correct_answer;return/*#__PURE__*/_jsxs(\"div\",{className:\"section-quiz-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-header\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/sections/\".concat(sectionId,\"/learn\"),className:\"back-button\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:20}),\"Back to Learning\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"quiz-progress\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",role:\"progressbar\",\"aria-valuenow\":Math.round(progress),\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",\"aria-label\":\"Quiz progress: Question \".concat(currentQuestion+1,\" of \").concat(questions.length),children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(progress,\"%\")}})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Question \",currentQuestion+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-points\",children:[/*#__PURE__*/_jsx(Star,{size:16}),\"1 point\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"question-text\",children:currentQ.question_text}),/*#__PURE__*/_jsx(\"div\",{className:\"answer-options\",children:currentQ.options.map((option,index)=>{const isSelected=selectedAnswer===option;const isCorrectAnswer=option===currentQ.correct_answer;let optionClass='answer-option';if(answerSubmitted){if(isCorrectAnswer){optionClass+=' correct';}else if(isSelected&&!isAnswerCorrect){optionClass+=' incorrect';}}else if(isSelected){optionClass+=' selected';}return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAnswerSelect(option),className:optionClass,disabled:answerSubmitted,children:[/*#__PURE__*/_jsx(\"div\",{className:\"option-letter\",children:String.fromCharCode(65+index)}),/*#__PURE__*/_jsx(\"div\",{className:\"option-text\",children:option}),answerSubmitted&&isCorrectAnswer&&/*#__PURE__*/_jsx(CheckCircle,{size:16,className:\"correct-icon\"}),answerSubmitted&&isSelected&&!isAnswerCorrect&&/*#__PURE__*/_jsx(XCircle,{size:16,className:\"incorrect-icon\"})]},index);})}),showExplanation&&/*#__PURE__*/_jsxs(\"div\",{className:\"explanation-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"explanation-header\",children:[/*#__PURE__*/_jsx(Info,{size:20}),/*#__PURE__*/_jsx(\"h3\",{children:\"Explanation\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"explanation-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"correct-answer\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Correct Answer:\"}),\" \",currentQ.correct_answer]}),/*#__PURE__*/_jsxs(\"div\",{className:\"explanation-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Why this is correct:\"}),/*#__PURE__*/_jsx(\"p\",{children:currentQ.explanation})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"quiz-navigation\",children:!answerSubmitted?/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitAnswer,disabled:selectedAnswer===null,className:\"btn btn-primary\",children:\"Submit Answer\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,className:\"btn btn-primary\",children:currentQuestion===questions.length-1?'Finish Quiz':'Next Question'})})]})]});};export default SectionQuiz;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","useAuth","ArrowLeft","CheckCircle","XCircle","Trophy","Star","Info","axios","jsx","_jsx","jsxs","_jsxs","SectionQuiz","sectionId","user","updateUser","navigate","questions","setQuestions","currentQuestion","setCurrentQuestion","selectedAnswer","setSelectedAnswer","answers","setAnswers","loading","setLoading","error","setError","quizCompleted","setQuizCompleted","score","setScore","xpEarned","setXpEarned","showExplanation","setShowExplanation","answerSubmitted","setAnswerSubmitted","moduleId","setModuleId","fetchQuestions","questionsResponse","sectionResponse","Promise","all","get","concat","data","module_id","err","console","handleAnswerSelect","answer","handleSubmitAnswer","newAnswers","_objectSpread","currentQ","isAnswerCorrect","correct_answer","handleNext","length","finalScore","percentage","earnedXP","Math","round","response","post","totalQuestions","userStatsResponse","updatedUser","total_xp","newTotalXP","level","newLevel","statsErr","handleRetry","className","children","Array","isArray","isPassed","size","onClick","state","refresh","progress","to","role","style","width","question_text","options","map","option","index","isSelected","isCorrectAnswer","optionClass","disabled","String","fromCharCode","explanation"],"sources":["C:/Users/yoga/Downloads/bakalauras-main/frontend/src/pages/SectionQuiz.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { ArrowLeft, CheckCircle, XCircle, Trophy, Star, Info } from 'lucide-react';\nimport axios from 'axios';\nimport './SectionQuiz.css';\n\nconst SectionQuiz = () => {\n  const { sectionId } = useParams();\n  const { user, updateUser } = useAuth();\n  const navigate = useNavigate();\n\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\n  const [answers, setAnswers] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [quizCompleted, setQuizCompleted] = useState(false);\n  const [score, setScore] = useState(0);\n  const [xpEarned, setXpEarned] = useState(0);\n  const [showExplanation, setShowExplanation] = useState(false);\n  const [answerSubmitted, setAnswerSubmitted] = useState(false);\n  const [moduleId, setModuleId] = useState(null);\n\n  useEffect(() => {\n    const fetchQuestions = async () => {\n      try {\n        const [questionsResponse, sectionResponse] = await Promise.all([\n          axios.get(`/api/sections/${sectionId}/questions`),\n          axios.get(`/api/sections/${sectionId}`)\n        ]);\n        setQuestions(questionsResponse.data);\n        setModuleId(sectionResponse.data.module_id);\n      } catch (err) {\n        setError('Failed to load quiz questions');\n        console.error('Error fetching questions:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchQuestions();\n  }, [sectionId]);\n\n  const handleAnswerSelect = (answer) => {\n    if (!answerSubmitted) {\n      setSelectedAnswer(answer);\n    }\n  };\n\n  const handleSubmitAnswer = () => {\n    if (selectedAnswer === null) return;\n\n    const newAnswers = { ...answers, [currentQuestion]: selectedAnswer };\n    setAnswers(newAnswers);\n\n    // Check if answer is correct\n    const currentQ = questions[currentQuestion];\n    const isAnswerCorrect = selectedAnswer === currentQ.correct_answer;\n    \n    if (isAnswerCorrect) {\n      setScore(score + 1);\n    }\n\n    setAnswerSubmitted(true);\n    setShowExplanation(true);\n  };\n\n  const handleNext = async () => {\n    if (currentQuestion < questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n      setSelectedAnswer(null);\n      setShowExplanation(false);\n      setAnswerSubmitted(false);\n    } else {\n      // Quiz completed\n      const finalScore = score; // Score is already updated in handleSubmitAnswer\n      const percentage = (finalScore / questions.length) * 100;\n      const earnedXP = Math.round((percentage / 100) * 50); // Max 50 XP per quiz\n      \n      setXpEarned(earnedXP);\n      setQuizCompleted(true);\n\n      // Submit quiz results\n      try {\n        const response = await axios.post(`/api/sections/${sectionId}/quiz`, {\n          answers: answers,\n          score: finalScore,\n          totalQuestions: questions.length\n        });\n\n        // Update user XP\n        if (response.data.xpEarned) {\n          // Fetch updated user stats to ensure we have the latest data\n          try {\n            const userStatsResponse = await axios.get('/api/user/stats');\n            const updatedUser = { \n              ...user, \n              total_xp: response.data.newTotalXP || (user.total_xp || 0) + response.data.xpEarned,\n              level: response.data.newLevel || user.level\n            };\n            updateUser(updatedUser);\n          } catch (statsErr) {\n            console.error('Error fetching updated user stats:', statsErr);\n            // Fallback to just updating XP\n            updateUser({ ...user, total_xp: (user.total_xp || 0) + response.data.xpEarned });\n          }\n        }\n      } catch (err) {\n        console.error('Error submitting quiz results:', err);\n      }\n    }\n  };\n\n  const handleRetry = () => {\n    setCurrentQuestion(0);\n    setSelectedAnswer(null);\n    setAnswers({});\n    setQuizCompleted(false);\n    setScore(0);\n    setXpEarned(0);\n    setShowExplanation(false);\n    setAnswerSubmitted(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"section-quiz-container\">\n        <div className=\"loading\">Loading quiz...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"section-quiz-container\">\n        <div className=\"error\">{error}</div>\n      </div>\n    );\n  }\n\n  if (!Array.isArray(questions) || questions.length === 0) {\n    return (\n      <div className=\"section-quiz-container\">\n        <div className=\"error\">No questions available for this section</div>\n      </div>\n    );\n  }\n\n  if (quizCompleted) {\n    const percentage = (score / questions.length) * 100;\n    const isPassed = percentage >= 70;\n\n    return (\n      <div className=\"section-quiz-container\">\n        <div className=\"quiz-results\">\n          <div className=\"results-header\">\n            <h1>Quiz Complete!</h1>\n            <div className={`score-badge ${isPassed ? 'passed' : 'failed'}`}>\n              {isPassed ? <CheckCircle size={24} /> : <XCircle size={24} />}\n              {percentage}%\n            </div>\n          </div>\n\n          <div className=\"results-stats\">\n            <div className=\"stat-card\">\n              <div className=\"stat-value\">{score}</div>\n              <div className=\"stat-label\">Correct Answers</div>\n            </div>\n            <div className=\"stat-card\">\n              <div className=\"stat-value\">{questions.length}</div>\n              <div className=\"stat-label\">Total Questions</div>\n            </div>\n            <div className=\"stat-card\">\n              <div className=\"stat-value\">{xpEarned}</div>\n              <div className=\"stat-label\">XP Earned</div>\n            </div>\n          </div>\n\n          {isPassed && (\n            <div className=\"success-message\">\n              <Trophy size={32} />\n              <h2>Congratulations!</h2>\n              <p>You've successfully completed this section and earned {xpEarned} XP!</p>\n            </div>\n          )}\n\n          {!isPassed && (\n            <div className=\"failure-message\">\n              <XCircle size={32} />\n              <h2>Keep Learning!</h2>\n              <p>You need 70% to pass. Review the material and try again.</p>\n            </div>\n          )}\n\n          <div className=\"results-actions\">\n            <button onClick={handleRetry} className=\"btn btn-secondary\">\n              Retry Quiz\n            </button>\n            <button \n              onClick={() => navigate(`/modules/${moduleId || 1}`, { state: { refresh: true } })}\n              className=\"btn btn-primary\"\n            >\n              Back to Module\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const currentQ = questions[currentQuestion];\n  const progress = ((currentQuestion + 1) / questions.length) * 100;\n  const isAnswerCorrect = selectedAnswer === currentQ.correct_answer;\n\n  return (\n    <div className=\"section-quiz-container\">\n      <div className=\"quiz-header\">\n        <Link to={`/sections/${sectionId}/learn`} className=\"back-button\">\n          <ArrowLeft size={20} />\n          Back to Learning\n        </Link>\n        <div className=\"quiz-progress\">\n          <div \n            className=\"progress-bar\"\n            role=\"progressbar\" \n            aria-valuenow={Math.round(progress)} \n            aria-valuemin=\"0\" \n            aria-valuemax=\"100\"\n            aria-label={`Quiz progress: Question ${currentQuestion + 1} of ${questions.length}`}\n          >\n            <div className=\"progress-fill\" style={{ width: `${progress}%` }}></div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"question-container\">\n        <div className=\"question-card\">\n          <div className=\"question-header\">\n            <h2>Question {currentQuestion + 1}</h2>\n            <div className=\"question-points\">\n              <Star size={16} />\n              1 point\n            </div>\n          </div>\n\n          <div className=\"question-text\">\n            {currentQ.question_text}\n          </div>\n\n          <div className=\"answer-options\">\n            {currentQ.options.map((option, index) => {\n              const isSelected = selectedAnswer === option;\n              const isCorrectAnswer = option === currentQ.correct_answer;\n              let optionClass = 'answer-option';\n              \n              if (answerSubmitted) {\n                if (isCorrectAnswer) {\n                  optionClass += ' correct';\n                } else if (isSelected && !isAnswerCorrect) {\n                  optionClass += ' incorrect';\n                }\n              } else if (isSelected) {\n                optionClass += ' selected';\n              }\n\n              return (\n                <button\n                  key={index}\n                  onClick={() => handleAnswerSelect(option)}\n                  className={optionClass}\n                  disabled={answerSubmitted}\n                >\n                  <div className=\"option-letter\">\n                    {String.fromCharCode(65 + index)}\n                  </div>\n                  <div className=\"option-text\">{option}</div>\n                  {answerSubmitted && isCorrectAnswer && (\n                    <CheckCircle size={16} className=\"correct-icon\" />\n                  )}\n                  {answerSubmitted && isSelected && !isAnswerCorrect && (\n                    <XCircle size={16} className=\"incorrect-icon\" />\n                  )}\n                </button>\n              );\n            })}\n          </div>\n\n          {showExplanation && (\n            <div className=\"explanation-container\">\n              <div className=\"explanation-header\">\n                <Info size={20} />\n                <h3>Explanation</h3>\n              </div>\n              <div className=\"explanation-content\">\n                <div className=\"correct-answer\">\n                  <strong>Correct Answer:</strong> {currentQ.correct_answer}\n                </div>\n                <div className=\"explanation-text\">\n                  <strong>Why this is correct:</strong>\n                  <p>{currentQ.explanation}</p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"quiz-navigation\">\n          {!answerSubmitted ? (\n            <button\n              onClick={handleSubmitAnswer}\n              disabled={selectedAnswer === null}\n              className=\"btn btn-primary\"\n            >\n              Submit Answer\n            </button>\n          ) : (\n            <button\n              onClick={handleNext}\n              className=\"btn btn-primary\"\n            >\n              {currentQuestion === questions.length - 1 ? 'Finish Quiz' : 'Next Question'}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SectionQuiz;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}