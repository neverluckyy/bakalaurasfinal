{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{BookOpen,Trophy,TrendingUp,Target,Star,Award}from'lucide-react';import axios from'axios';import'./Home.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const{user}=useAuth();const[modules,setModules]=useState([]);const[loading,setLoading]=useState(true);const[overallProgress,setOverallProgress]=useState(0);useEffect(()=>{fetchModules();},[]);const fetchModules=async()=>{try{const response=await axios.get('/api/modules',{withCredentials:true});// Ensure we always set an array\nconst modulesData=Array.isArray(response.data)?response.data:[];setModules(modulesData);// Calculate overall progress\nconst totalSections=modulesData.reduce((sum,module)=>sum+(module.section_count||0),0);const completedSections=modulesData.reduce((sum,module)=>sum+(module.completed_sections||0),0);const progress=totalSections>0?Math.round(completedSections/totalSections*100):0;setOverallProgress(progress);}catch(error){console.error('Error fetching modules:',error);setModules([]);// Set empty array on error\n}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"home-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/avatars/\".concat(user.avatar_key||'robot_coral',\".svg\"),alt:\"User Avatar\",className:\"user-avatar\",onError:e=>{console.error(\"Failed to load avatar: \".concat(user.avatar_key));e.target.src='/avatars/robot_coral.svg';}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome back, \",user.display_name,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"user-level\",children:[\"Level \",user.level||1,\" \\u2022 \",user.total_xp||0,\" XP\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",role:\"progressbar\",\"aria-valuenow\":overallProgress,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",\"aria-label\":\"Overall learning progress: \".concat(overallProgress,\"% complete\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(overallProgress,\"%\")}}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[overallProgress,\"%\"]})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-grid\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/modules\",className:\"action-card\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"action-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Continue Learning\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pick up where you left off\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/leaderboard\",className:\"action-card\",children:[/*#__PURE__*/_jsx(Trophy,{className:\"action-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"View Leaderboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"See how you rank\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"action-card\",children:[/*#__PURE__*/_jsx(Star,{className:\"action-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Customize your avatar\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent-progress\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modules-grid\",children:Array.isArray(modules)&&modules.slice(0,3).map(module=>/*#__PURE__*/_jsxs(\"div\",{className:\"module-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"module-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:module.display_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"completion-badge\",children:[module.completion_percentage,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"module-progress\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",role:\"progressbar\",\"aria-valuenow\":module.completion_percentage,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",\"aria-label\":\"\".concat(module.display_name,\" progress: \").concat(module.completion_percentage,\"% complete\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(module.completion_percentage,\"%\")}}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[module.completion_percentage,\"%\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[module.completed_sections,\" of \",module.section_count,\" sections completed\"]})]}),/*#__PURE__*/_jsx(Link,{to:\"/modules/\".concat(module.id),className:\"btn btn-secondary\",children:\"Continue\"})]},module.id))})]})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","Link","useAuth","BookOpen","Trophy","TrendingUp","Target","Star","Award","axios","jsx","_jsx","jsxs","_jsxs","Home","user","modules","setModules","loading","setLoading","overallProgress","setOverallProgress","fetchModules","response","get","withCredentials","modulesData","Array","isArray","data","totalSections","reduce","sum","module","section_count","completedSections","completed_sections","progress","Math","round","error","console","className","children","src","concat","avatar_key","alt","onError","e","target","display_name","level","total_xp","role","style","width","to","slice","map","completion_percentage","id"],"sources":["C:/Users/yoga/Downloads/bakalauras-main/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { \n  BookOpen, \n  Trophy, \n  TrendingUp, \n  Target,\n  Star,\n  Award\n} from 'lucide-react';\nimport axios from 'axios';\nimport './Home.css';\n\nfunction Home() {\n  const { user } = useAuth();\n  const [modules, setModules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [overallProgress, setOverallProgress] = useState(0);\n\n  useEffect(() => {\n    fetchModules();\n  }, []);\n\n  const fetchModules = async () => {\n    try {\n      const response = await axios.get('/api/modules', { withCredentials: true });\n      // Ensure we always set an array\n      const modulesData = Array.isArray(response.data) ? response.data : [];\n      setModules(modulesData);\n      \n      // Calculate overall progress\n      const totalSections = modulesData.reduce((sum, module) => sum + (module.section_count || 0), 0);\n      const completedSections = modulesData.reduce((sum, module) => sum + (module.completed_sections || 0), 0);\n      const progress = totalSections > 0 ? Math.round((completedSections / totalSections) * 100) : 0;\n      setOverallProgress(progress);\n    } catch (error) {\n      console.error('Error fetching modules:', error);\n      setModules([]); // Set empty array on error\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n\n  if (loading) {\n    return (\n      <div className=\"home-container\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"home-container\">\n      {/* Hero Section */}\n      <div className=\"hero-section\">\n        <div className=\"hero-content\">\n          <div className=\"user-info\">\n            <div className=\"avatar-container\">\n              <img\n                src={`/avatars/${user.avatar_key || 'robot_coral'}.svg`}\n                alt=\"User Avatar\"\n                className=\"user-avatar\"\n                onError={(e) => {\n                  console.error(`Failed to load avatar: ${user.avatar_key}`);\n                  e.target.src = '/avatars/robot_coral.svg';\n                }}\n              />\n            </div>\n            <div className=\"user-details\">\n              <h1>Welcome back, {user.display_name}!</h1>\n              <p className=\"user-level\">Level {user.level || 1} â€¢ {user.total_xp || 0} XP</p>\n            </div>\n          </div>\n          \n          <div className=\"progress-section\">\n            <div \n              className=\"progress-bar\" \n              role=\"progressbar\" \n              aria-valuenow={overallProgress} \n              aria-valuemin=\"0\" \n              aria-valuemax=\"100\"\n              aria-label={`Overall learning progress: ${overallProgress}% complete`}\n            >\n              <div \n                className=\"progress-fill\" \n                style={{ width: `${overallProgress}%` }}\n              ></div>\n              <span className=\"progress-text\">{overallProgress}%</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n\n\n      {/* Quick Actions */}\n      <div className=\"quick-actions\">\n        <h2>Quick Actions</h2>\n        <div className=\"action-grid\">\n          <Link to=\"/modules\" className=\"action-card\">\n            <BookOpen className=\"action-icon\" />\n            <h3>Continue Learning</h3>\n            <p>Pick up where you left off</p>\n          </Link>\n          \n          <Link to=\"/leaderboard\" className=\"action-card\">\n            <Trophy className=\"action-icon\" />\n            <h3>View Leaderboard</h3>\n            <p>See how you rank</p>\n          </Link>\n          \n          <Link to=\"/profile\" className=\"action-card\">\n            <Star className=\"action-icon\" />\n            <h3>Update Profile</h3>\n            <p>Customize your avatar</p>\n          </Link>\n        </div>\n      </div>\n\n      {/* Recent Progress */}\n      <div className=\"recent-progress\">\n        <h2>Your Progress</h2>\n        <div className=\"modules-grid\">\n          {Array.isArray(modules) && modules.slice(0, 3).map((module) => (\n            <div key={module.id} className=\"module-card\">\n              <div className=\"module-header\">\n                <h3>{module.display_name}</h3>\n                <span className=\"completion-badge\">\n                  {module.completion_percentage}%\n                </span>\n              </div>\n              <div className=\"module-progress\">\n                <div \n                  className=\"progress-bar\"\n                  role=\"progressbar\" \n                  aria-valuenow={module.completion_percentage} \n                  aria-valuemin=\"0\" \n                  aria-valuemax=\"100\"\n                  aria-label={`${module.display_name} progress: ${module.completion_percentage}% complete`}\n                >\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${module.completion_percentage}%` }}\n                  ></div>\n                  <span className=\"progress-text\">{module.completion_percentage}%</span>\n                </div>\n                <p>{module.completed_sections} of {module.section_count} sections completed</p>\n              </div>\n              <Link to={`/modules/${module.id}`} className=\"btn btn-secondary\">\n                Continue\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}