{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{BookOpen,CheckCircle,Play}from'lucide-react';import axios from'axios';import'./Modules.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Modules(){const[modules,setModules]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchModules();},[]);const fetchModules=async()=>{try{const response=await axios.get('/api/modules',{withCredentials:true});// Ensure we always set an array\nconst modulesData=Array.isArray(response.data)?response.data:[];setModules(modulesData);}catch(error){console.error('Error fetching modules:',error);setModules([]);// Set empty array on error\n}finally{setLoading(false);}};const getModuleIcon=moduleName=>{if(moduleName.includes('Security Awareness'))return'ðŸ›¡ï¸';if(moduleName.includes('Phishing'))return'ðŸŽ£';if(moduleName.includes('Business Email'))return'ðŸ“§';return'ðŸ“š';};const getModuleColor=index=>{const colors=['linear-gradient(135deg, #667eea 0%, #764ba2 100%)','linear-gradient(135deg, #f093fb 0%, #f5576c 100%)','linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)','linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)','linear-gradient(135deg, #fa709a 0%, #fee140 100%)'];return colors[index%colors.length];};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"modules-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"modules-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modules-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Learning Modules\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Master the fundamentals of social engineering defense\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modules-grid\",children:Array.isArray(modules)&&modules.map((module,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"module-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"module-icon\",style:{background:getModuleColor(index)},children:/*#__PURE__*/_jsx(\"span\",{className:\"module-emoji\",children:getModuleIcon(module.display_name)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"module-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:module.display_name}),/*#__PURE__*/_jsx(\"p\",{className:\"module-description\",children:module.description||'Learn essential security concepts and best practices'}),/*#__PURE__*/_jsxs(\"div\",{className:\"module-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"stat-icon\"}),/*#__PURE__*/_jsxs(\"span\",{children:[module.section_count,\" sections\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"stat-icon\"}),/*#__PURE__*/_jsxs(\"span\",{children:[module.completed_sections,\" completed\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"module-progress\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",role:\"progressbar\",\"aria-valuenow\":module.completion_percentage,\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",\"aria-label\":\"\".concat(module.display_name,\" progress: \").concat(module.completion_percentage,\"% complete\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(module.completion_percentage,\"%\")}}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[module.completion_percentage,\"%\"]})]})}),/*#__PURE__*/_jsxs(Link,{to:\"/modules/\".concat(module.id),className:\"btn btn-primary module-btn\",children:[/*#__PURE__*/_jsx(Play,{className:\"btn-icon\"}),module.completion_percentage===100?'Review':'Continue']})]})]},module.id))}),(!Array.isArray(modules)||modules.length===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No modules available\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Check back later for new learning content\"})]})]});}export default Modules;","map":{"version":3,"names":["React","useState","useEffect","Link","BookOpen","CheckCircle","Play","axios","jsx","_jsx","jsxs","_jsxs","Modules","modules","setModules","loading","setLoading","fetchModules","response","get","withCredentials","modulesData","Array","isArray","data","error","console","getModuleIcon","moduleName","includes","getModuleColor","index","colors","length","className","children","map","module","style","background","display_name","description","section_count","completed_sections","role","completion_percentage","concat","width","to","id"],"sources":["C:/Users/yoga/Downloads/bakalauras-main/frontend/src/pages/Modules.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { BookOpen, CheckCircle, Play } from 'lucide-react';\nimport axios from 'axios';\nimport './Modules.css';\n\nfunction Modules() {\n  const [modules, setModules] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchModules();\n  }, []);\n\n  const fetchModules = async () => {\n    try {\n      const response = await axios.get('/api/modules', { withCredentials: true });\n      // Ensure we always set an array\n      const modulesData = Array.isArray(response.data) ? response.data : [];\n      setModules(modulesData);\n    } catch (error) {\n      console.error('Error fetching modules:', error);\n      setModules([]); // Set empty array on error\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getModuleIcon = (moduleName) => {\n    if (moduleName.includes('Security Awareness')) return 'ðŸ›¡ï¸';\n    if (moduleName.includes('Phishing')) return 'ðŸŽ£';\n    if (moduleName.includes('Business Email')) return 'ðŸ“§';\n    return 'ðŸ“š';\n  };\n\n  const getModuleColor = (index) => {\n    const colors = [\n      'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n      'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n      'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n      'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',\n      'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'\n    ];\n    return colors[index % colors.length];\n  };\n\n  if (loading) {\n    return (\n      <div className=\"modules-container\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"modules-container\">\n      <div className=\"modules-header\">\n        <h1>Learning Modules</h1>\n        <p>Master the fundamentals of social engineering defense</p>\n      </div>\n\n      <div className=\"modules-grid\">\n        {Array.isArray(modules) && modules.map((module, index) => (\n          <div key={module.id} className=\"module-card\">\n            <div \n              className=\"module-icon\"\n              style={{ background: getModuleColor(index) }}\n            >\n              <span className=\"module-emoji\">{getModuleIcon(module.display_name)}</span>\n            </div>\n            \n            <div className=\"module-content\">\n              <h3>{module.display_name}</h3>\n              <p className=\"module-description\">\n                {module.description || 'Learn essential security concepts and best practices'}\n              </p>\n              \n              <div className=\"module-stats\">\n                <div className=\"stat\">\n                  <BookOpen className=\"stat-icon\" />\n                  <span>{module.section_count} sections</span>\n                </div>\n                <div className=\"stat\">\n                  <CheckCircle className=\"stat-icon\" />\n                  <span>{module.completed_sections} completed</span>\n                </div>\n              </div>\n              \n              <div className=\"module-progress\">\n                <div \n                  className=\"progress-bar\"\n                  role=\"progressbar\" \n                  aria-valuenow={module.completion_percentage} \n                  aria-valuemin=\"0\" \n                  aria-valuemax=\"100\"\n                  aria-label={`${module.display_name} progress: ${module.completion_percentage}% complete`}\n                >\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${module.completion_percentage}%` }}\n                  ></div>\n                  <span className=\"progress-text\">{module.completion_percentage}%</span>\n                </div>\n              </div>\n              \n              <Link \n                to={`/modules/${module.id}`} \n                className=\"btn btn-primary module-btn\"\n              >\n                <Play className=\"btn-icon\" />\n                {module.completion_percentage === 100 ? 'Review' : 'Continue'}\n              </Link>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {(!Array.isArray(modules) || modules.length === 0) && (\n        <div className=\"empty-state\">\n          <BookOpen className=\"empty-icon\" />\n          <h3>No modules available</h3>\n          <p>Check back later for new learning content</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Modules;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}